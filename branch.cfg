cfgs:
  main:
    branches:
    - master
    inherit:
      controller-manager-library:
        base_definition:
          repo:
            source_labels:
            - name: cloud.gardener.cnudie/dso/scanning-hints/source_analysis/v1
              value:
                policy: skip
                comment: |
                  we use gosec for sast scanning. See attached log.
          steps:
            build:
              image: golang:1.23.2
              output_dir: binary
            check:
              image: golang:1.23.2
            test:
              image: golang:1.23.2
          traits:
            version:
              inject_effective_version: true
              preprocess: inject-branch-name
        jobs:
          head-update: null
          pull-request:
            traits:
              pull-request: null
          release:
            traits:
              component_descriptor: null
              release:
                nextversion: bump_minor
                assets:
                - type: build-step-log
                  step_name: check
                  purposes:
                  - lint
                  - sast
                  - gosec
                  comment: |
                      we use gosec (linter) for SAST scans
                      see: https://github.com/securego/gosec
                      enabled by https://github.com/gardener/controller-manager-library/pull/71
              slack:
                channel_cfgs:
                  internal_scp_workspace:
                    channel_name: C9CEBQPGE
                    slack_cfg_name: scp_workspace
                default_channel: internal_scp_workspace
              version:
                preprocess: finalize
